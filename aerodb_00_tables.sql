-- 

DROP DATABASE IF EXISTS aerodb;
CREATE DATABASE aerodb;

-- customer names
DROP TABLE IF EXISTS aerodb.customer;
CREATE TABLE aerodb.customer
(
    customerID int NOT NULL AUTO_INCREMENT,
    customerName varchar(50),
    PRIMARY KEY (customerID)
);

-- program code
DROP TABLE IF EXISTS aerodb.program;
CREATE TABLE aerodb.program
(
    programID int NOT NULL AUTO_INCREMENT,
    programCode char(2) UNIQUE,
    customerID int NOT NULL,
    programDesc varchar(50),
    PRIMARY KEY (programID),
    FOREIGN KEY (customerID) REFERENCES customer(customerID)
);

-- source location codes
DROP TABLE IF EXISTS aerodb.source;
CREATE TABLE aerodb.source
(
    sourceID int NOT NULL AUTO_INCREMENT,
    sourceCode char(3) UNIQUE,
    PRIMARY KEY (sourceID)
);

-- part numbers
DROP TABLE IF EXISTS aerodb.part;
CREATE TABLE aerodb.part
(
    partNumID int NOT NULL AUTO_INCREMENT,
    partNum char(20) UNIQUE,
    partDescription varchar(50),
    programID int NOT NULL,
    sourceID int NOT NULL,
    PRIMARY KEY (partNumID),
    FOREIGN KEY (programID) REFERENCES program(programID),
    FOREIGN KEY (sourceID) REFERENCES source(sourceID)
);

-- assembly relation
DROP TABLE IF EXISTS aerodb.assy_bom;
CREATE TABLE aerodb.assy_bom
(
    partNumID int NOT NULL,
    parentNumID int NOT NULL,
    quantity DECIMAL(6,3) NOT NULL,
    CHECK (quantity>=0.001),
    CONSTRAINT assy_bom_pk PRIMARY KEY (partNumID, parentNumID),
    FOREIGN KEY (partNumID) REFERENCES part(partNumID),
    FOREIGN KEY (parentNumID) REFERENCES part(partNumID)
);

-- work order
DROP TABLE IF EXISTS aerodb.wo;
CREATE TABLE aerodb.wo 
(
    woID int NOT NULL AUTO_INCREMENT,
    partNumID int NOT NULL,
    quantity int,
    CHECK (quantity>=1),
    PRIMARY KEY (woID),
    FOREIGN KEY (partNumID) REFERENCES part(partNumID)
);
ALTER TABLE aerodb.wo AUTO_INCREMENT=100000000;

-- storage building code
DROP TABLE IF EXISTS aerodb.building;
CREATE TABLE aerodb.building 
(
    buildingID int NOT NULL AUTO_INCREMENT,
    buildingCode char(5) UNIQUE,
    PRIMARY KEY (buildingID)
);

-- shelf location code
DROP TABLE IF EXISTS aerodb.shelf;
CREATE TABLE aerodb.shelf 
(
    shelfID int NOT NULL AUTO_INCREMENT,
    shelfCode char(2),
    buildingID int NOT NULL,
    PRIMARY KEY (shelfID),
    FOREIGN KEY (buildingID) REFERENCES building(buildingID)
);

-- inventory relation
DROP TABLE IF EXISTS aerodb.add_inv;
CREATE TABLE aerodb.add_inv
(
    partNumID int NOT NULL,
    shelfID int NOT NULL,
    quantity DECIMAL(6,3),
    CHECK (quantity>=0),
    PRIMARY KEY (partNumID, shelfID),
    FOREIGN KEY (partNumID) REFERENCES part(partNumID),
    FOREIGN KEY (shelfID) REFERENCES shelf(shelfID)
);


-- insert data
INSERT INTO aerodb.customer (customerName) VALUES ('General'),('Bonhoeffer'),('Sitkovsky'),('Dell'),('Loughead');


INSERT INTO aerodb.program (programCode, customerID, programDesc) VALUES 
('XX',1,'General, all programs'),
('9T',2,'9T9 aircraft'),
('9W',2,'9W9 aircraft'),
('6B',2,'6B aircraft'),
('SC',3,'60S main'),
('SK',3,'60S spares'),
('VZ',4,'H1Z Snek'),
('BD',5,'WF-2 wing'),
('ED',5,'WF-2 spares'),
('JG',3,'68S main');


INSERT INTO aerodb.source (sourceCode) VALUES 
("A14"),
("A71"),
("A72"),
("B01"),
("C01"),
("C02"),
("C03"),
("C04"),
("D02"),
("D05"),
("D06"),
("D08"),
("D11"),
("D15"),
("VEN");

INSERT INTO aerodb.part (partNum, partDescription, programID, sourceID) VALUES
("_MTL00001","AL-C SHT 7075-0 AMS4048 T.063 W48 L144",1,15),
("_MTL00002","AL-C SHT 7075-0 AMS4048 T.080 W48 L144",1,15),
("_MTL00006","AL-C SHT 7075-T62 AMS4048",1,15),
("_MTL00013","AL-UT BAR 7075-T7351 QQ-A-225/9 T1.500 W2 L1",1,15),
("_MTL00019","AL-C SHT 7075-T6 AMS4049 T.063 W48 L144",1,15),
("_MTL00020","AL-C SHT 7075-0 AMS4048 T.032 W48 L144",1,15),
("_MTL00021","AL-C SHT 7075-0 AMS4048 T.050 W48 L144",1,15),
("_MTL00022","AL-C SHT 7075-T6 AMS4049 T.025 W48 L144",1,15),
("_MTL00023","AL-C SHT 7075-T6 AMS4049 T.032 W48 L144",1,15),
("_MTL00024","AL-C SHT 7075-T6 AMS4049 T.090 W48 L144",1,15),
("_MTL00025","AL-C SHT 7075-T6 AMS4049 T.125 W48 L144",1,15),
("_MTL00042","AL-UT BAR 7075-T7351 QQ-A-225/9 T1.250 W1.500 L1",1,15),
("_MTL00071","S-STL ROD 15-5PH AMS5659 D1.500 L1",1,15),
("_MTL00200","AL-B EXTR 7050-T76 AMS4340",1,15),
("_MTL00205","AL-B EXTR 7075-T73511 AMS-QQ-A-200/11",1,15),
("_MTL00206","AL-B EXTR 7150-T77511 BMS7-306",1,15),
("_MTL00210","S-STL SHT 15-5PH BMS7-240,TY.I T.063 W36 L120",1,15),
("_MTL00217","AL-B EXTR 7075-T6511 QQ-A-200/11 L1",1,15),
("_MTL00218","AL-B EXTR 7075-T6511 QQ-A-200/11 L1",1,15),
("_MTL00219","AL-B EXTR 7075-T6511 QQ-A-200/11 L1",1,15),
("_MTL00220","AL-B EXTR 7075-T6511 QQ-A-200/11 L1",1,15),
("_MTL00221","AL-B EXTR 7075-T6511 QQ-A-200/11 L1",1,15),
("_MTL00230","AL-B BAR 7075-T7351 QQ-A-225/9 T1.500 W3 L1",1,15),
("_MTL00235","AL-C SHT 7075-0 AMS4048 T.063 W48 L144",1,15),
("_MTL00250","AL-B EXTR 7075-T6511 AMS4154 L144",1,15),
("_MTL00252","AL-B SHT 2024-T3 AMS-QQ-A-250/4",1,15),
("_MTL00253","AL-B SHT 7075-0 AMS-QQ-A-250/12",1,15),
("_MTL00254","AL-B PLT 7075-T7351 QQ-A-250/12 T2.500 W8.500 *",1,15),
("_MTL00255","AL-B PLT 7075-T7351 QQ-A-250/12 T1.750 W3.500 *",1,15),
("_MTL00260","S-STL BAR 15-5PH AMS5659TY1 T.500 W1.200 L3.500",1,15),
("_MTL00261","S-STL BAR 15-5PH AMS5659TY1 T.500 W1.130 L2.750",1,15),
("_MTL00270","AL-B PLT 7075-T7351 AMS-QQ-A-250/12 T1.750 W4.125*",1,15),
("_MTL00301","S-STL BAR 15-5PH AMS5659TYPE1 T2.300 W4.300 L7.500",1,15),
("_MTL00310","AL-B PLT 7075-T7351 AMS-QQ-A-250/12 T3 W2.800 *",1,15),
("_MTL00311","AL-B SHT 6061-0 AMS4025 T.040 L1",1,15),
("_MTL00315","AL-B PLT 7075-T7351 AMS-QQ-A-250/12 T2.750 W3 *",1,15),
("_MTL00316","AL-B PLT 7075-T7351 AMS-QQ-A-250/12 T3 W3 L3.750",1,15),
("_MTL00317","AL-B PLT 7075-T7351 AMS-QQ-A-250/12 T3 W3 L5.200",1,15),
("_MTL00330","S-STL PLT 15-5PH BMS7-240TYPEI T.250 W6.250 L9.500",1,15),
("_MTL00331","S-STL SHT 17-4PH AMS5604",1,15),
("7SX6140-10","STIFFENER",2,4),
("7SX6140-5","FITTING",2,4),
("7SX6140-6","FITTING",2,4),
("7SV6012-3","BEAM PANEL SUPPORT",3,4),
("7SV6012-4","BEAM PANEL SUPPORT",3,4),
("7SV6022-1","UPPER CHORD",3,4),
("7SV6022-2","UPPER CHORD",3,4),
("7SV6022-3","LOWER CHORD",3,4),
("7SV6022-4","LOWER CHORD",3,4),
("176E9634-01","STIFFENER PANEL",8,7),
("176E9634-05","STIFFENER PANEL",8,7),
("176H9002-19","ANGLE",9,7),
("176H9002-23","ANGLE",9,7),
("7QS4160-1","SHEAR STOP SHIM",4,5),
("7QS4160-2","SHEAR STOP SHIM",4,5),
("7QS6014-19","DOOR STOP FILLER",4,5),
("7QS6014-21","DOOR STOP FILLER",4,5),
("7QS6014-42","DOOR STOP FILLER",4,5),
("132-HZ12-03","ANGLE",7,5),
("132-HZ12-04","ANGLE",7,5),
("130-VZ01-15","DOUBLER",7,5),
("130-VZ01-16","DOUBLER",7,5),
("221-60S10-72","SHIM",5,12),
("251-60S01-05","UPPER CAP",5,7),
("251-60S01-17","TEE",5,9),
("251-60S01-19","STIFFENER",5,9),
("251-60S01-25","CAP",5,7),
("251-60S01-27","STIFFENER",5,11),
("251-60S01-59","STIFFENER",5,11),
("201-60S01-28","CLIP",5,11),
("201-60S01-29","STIFFENER",5,11),
("201-60S01-31","STIFFENER",5,11),
("201-60S01-37","STIFFENER",5,11),
("201-60S01-43","STIFFENER",5,11),
("201-60S01-55","STIFFENER",5,11),
("201-60S01-57","STIFFENER",5,11),
("219-60S29-45","STRAP",5,15),
("201-68W01-05","CAP, LHS UPPER",10,7),
("201-68W01-07","STIFFENER",10,4),
("201-68W01-11","STIFFENER",10,7),
("201-68W01-17","TEE",10,4),
("201-68W01-23","SUPPORT",10,4),
("201-68W01-25","STIFFENER",10,7),
("201-68W01-27","ANGLE LHS",10,15),
("201-68W01-041","BEAM ASSY",10,1),
("201-68W01-01","WEB, LHS",10,7),
("201-68W01-03","CAP, LHS LOWER",10,7),
("201-68W01-09","DOUBLER",10,7),
("201-68W01-10","DOUBLER",10,5),
("201-68W01-19","CAP, LHS LOWER",10,7),
("201-68W01-24","DOUBLER",10,5),
("9VC2154-2","FTTING",4,13),
("9VC2161-1","SPANT ASSY",4,2),
("9VC2164-1","SPANT DETAIL",4,15),
("9VC2821-11","FILLER",4,6),
("9VC2821-3","DOOR STOP FILLER",4,5),
("9VC2821-47","FILLER",4,5),
("9VC2853-1","FITTING - LOCK PIN",4,11),
("9VC2854-1","FITTING - LOCK PIN BACKUP",4,11),
("9VC2855-1","GUIDE TRACK",4,10),
("9VC2855-3","SERRATED PLATE",4,10),
("9VC2860-1","DOOR STOP ASSY",4,3),
("9VC2860-3","DOOR STOP ASSY",4,14),
("9VC2860-7","DOOR STOP ASSY",4,3),
("9VC2862-1","DOOR STOP FITTING",4,13),
("9VC2862-3","DOOR STOP FITTING",4,13),
("9VC2862-9","DOOR STOP FITTING",4,13),
("9VC2874-11","SEAL COMPONENT",4,8),
("9VC2874-3","SEAL RETAINER ASSY, FWD EDGE FRAME",4,2),
("9VC2874-6","SEAL COMPONENT",4,8),
("9VC2874-8","SEAL BRACKET, FWD EDGE FRAME",4,7),
("9VC4860-1","DOOR STOP ASSY",4,3),
("9VC4860-13","DOOR STOP ASSY",4,3),
("9VC4860-9","DOOR STOP ASSY",4,3),
("9VC4862-1","DOOR STOP FITTING",4,13),
("9VC4863-1","BEARING PLATE",4,11),
("9VC4863-3","SHEAR STOP",4,11),
("9VC4863-7","SHEAR STOP",4,11),
("9VC4863-9","WASHER",4,5),
("AN743Z13","BRACKET",1,15),
("HL1087ATW5","COLLAR, PIN-RIVET, THREAD",1,15),
("MS20470AD3-4","RIVET,SOLID (3585/LB)",1,15),
("MS20470AD4-4","RIVET,SOLID (1966/LB)",1,15),
("MS20470AD5-4","RIVET,SOLID (1140/LB)",1,15),
("MS20470AD6-4","RIVET,SOLID (740/LB)",1,15),
("MS21076L3N","NUT PLATE",1,15),
("NAS1080-05","COLLAR",1,15),
("NAS1080D06","COLLAR",1,15),
("NAS1097AD3-4","RIVET,SOLID (6096/LB)",1,15),
("NAS1097AD4-4","RIVET,SOLID (3019/LB)",1,15),
("NAS1465-03","PIN",1,15),
("NAS1526-02","PIN, SWG LKG",1,15),
("NAS1526-03","PIN, SWG LKG",1,15),
("NAS1526-04","PIN, SWG LKG",1,15),
("NAS1526-05","PIN",1,15),
("NAS9301B-4-02","BLIND, RIVET M7885-2-4-02",1,15),
("SS1048-4","BRACKET",5,15),
("SS1057-4","CLIP",5,15);


INSERT INTO aerodb.assy_bom VALUES 
(1,67,0.042),
(1,78,0.048),
(1,83,0.011),
(1,87,0.500),
(1,90,0.067),
(2,84,0.029),
(3,50,0.300),
(3,51,0.300),
(4,65,5.000),
(5,108,0.092),
(6,75,0.015),
(6,80,0.011),
(7,86,0.274),
(7,88,0.038),
(8,56,0.002),
(8,57,0.002),
(8,58,0.003),
(8,95,0.002),
(8,96,0.002),
(8,97,0.003),
(9,89,0.013),
(9,91,0.009),
(10,54,0.005),
(10,55,0.005),
(11,63,0.001),
(12,68,14.100),
(13,116,1.500),
(14,48,0.166),
(14,49,0.166),
(17,119,0.030),
(15,41,0.070),
(15,42,0.070),
(15,43,0.070),
(18,71,7.420),
(19,69,9.530),
(19,72,6.500),
(19,73,9.700),
(19,79,6.500),
(20,74,15.810),
(20,76,10.000),
(21,64,84.100),
(22,70,1.200),
(22,81,1.200),
(23,66,5.100),
(24,111,0.001),
(16,44,0.166),
(16,45,0.166),
(16,46,0.166),
(16,47,0.166),
(25,82,3.000),
(26,59,0.009),
(26,60,0.009),
(27,52,0.125),
(27,53,0.125),
(28,92,1.000),
(29,99,1.000),
(30,117,1.000),
(31,118,1.000),
(32,98,1.000),
(33,100,1.000),
(34,106,1.000),
(35,110,85.100),
(36,115,1.000),
(37,105,1.000),
(38,107,1.000),
(39,101,1.000),
(40,61,0.080),
(40,62,0.080),
(54,93,2.000),
(55,93,4.000),
(56,93,3.000),
(57,93,2.000),
(58,93,1.000),
(63,85,1.000),
(64,85,1.000),
(65,85,1.000),
(66,85,1.000),
(67,85,1.000),
(68,85,1.000),
(69,85,1.000),
(70,85,1.000),
(71,85,1.000),
(72,85,1.000),
(73,85,1.000),
(74,85,1.000),
(75,85,1.000),
(76,85,1.000),
(77,85,1.000),
(78,85,1.000),
(79,85,1.000),
(80,85,1.000),
(81,85,1.000),
(82,85,1.000),
(83,85,1.000),
(84,85,1.000),
(86,85,1.000),
(87,85,1.000),
(88,85,1.000),
(89,85,1.000),
(90,85,1.000),
(91,85,1.000),
(92,93,1.000),
(94,93,1.000),
(95,93,1.000),
(96,93,2.000),
(97,93,1.000),
(98,93,1.000),
(99,93,1.000),
(100,93,1.000),
(101,93,1.000),
(102,93,2.000),
(103,93,1.000),
(104,93,1.000),
(105,102,1.000),
(106,103,1.000),
(107,104,1.000),
(108,109,1.000),
(109,93,1.000),
(110,109,1.000),
(111,109,1.000),
(112,93,3.000),
(113,93,1.000),
(114,93,2.000),
(115,112,1.000),
(116,113,1.000),
(116,114,1.000),
(117,93,1.000),
(118,93,1.000),
(119,93,4.000),
(120,85,10.000),
(121,85,6.000),
(122,85,10.000),
(123,85,10.000),
(124,85,10.000),
(125,85,10.000),
(126,85,18.000),
(127,85,3.000),
(128,85,36.000),
(129,85,10.000),
(130,85,10.000),
(131,85,3.000),
(132,85,4.000),
(133,85,19.000),
(134,85,10.000),
(135,85,3.000),
(136,85,8.000),
(137,85,3.000),
(138,85,10.000);

INSERT INTO aerodb.wo (partNumID, quantity) VALUES 
(61,6),
(62,6),
(41,12),
(42,12),
(43,12),
(59,6),
(60,6),
(52,2),
(53,2),
(50,2),
(51,2),
(63,4),
(64,4),
(65,4),
(66,4),
(67,4),
(68,4),
(69,4),
(70,4),
(71,4),
(72,4),
(73,4),
(74,4),
(75,4),
(76,4),
(78,4),
(79,4),
(80,4),
(81,4),
(82,4),
(83,4),
(86,4),
(87,4),
(88,4),
(89,4),
(90,4),
(91,4),
(85,2),
(59,2),
(60,2),
(61,2),
(62,2),
(41,8),
(42,8),
(43,8),
(44,12),
(45,12),
(46,12),
(47,12),
(48,12),
(49,12);

INSERT INTO aerodb.building (buildingCode) VALUES 
('DTLPT'),
('ASSYW'),
('ASSYS'),
('NBULD');

INSERT INTO aerodb.shelf (shelfCode, buildingID) VALUES 
("D1",1),
("D2",1),
("D3",1),
("D4",1),
("D5",1),
("W1",2),
("W2",2),
("W3",2),
("W4",2),
("W5",2),
("S1",3),
("S2",3),
("S3",3),
("S4",3),
("S5",3),
("N1",4),
("N2",4),
("N3",4),
("N4",4),
("N5",4);

INSERT INTO aerodb.add_inv VALUES 
(59,16,2),
(60,16,2),
(61,17,2),
(62,17,2),
(41,11,3),
(42,11,3),
(43,11,3),
(44,12,1),
(45,12,1),
(46,12,1),
(47,12,1),
(48,12,1),
(49,12,1),
(63,1,3),
(64,1,1),
(65,1,2),
(66,1,3),
(67,1,3),
(68,1,3),
(69,1,3),
(70,2,3),
(71,2,3),
(72,2,2),
(73,2,3),
(74,2,3),
(75,2,3),
(76,2,3),
(78,6,3),
(79,6,3),
(80,6,3),
(81,6,3),
(82,6,3),
(83,6,3),
(86,7,1),
(87,7,1),
(88,7,3),
(89,7,3),
(90,7,3),
(91,7,3),
(92,18,2),
(99,18,2),
(117,18,32),
(118,18,2),
(98,18,2),
(100,18,2),
(106,18,2),
(110,18,2),
(115,18,8),
(105,18,8),
(107,18,2),
(101,18,2);